on_actions = {

    on_startup = {
        effect = {
		every_country = {
			limit = {
				NOT = { has_country_flag = has_actual_oob }
			}
			d_create_army = yes
		}
            ENG = {
                give_resource_rights = { receiver = EGY state = 551 }
                give_resource_rights = { receiver = EGY state = 549 }
            }
        }
    }

    on_state_control_changed = { # Balkan League Victory - Balkan War I
        effect = {
            if = {
                limit = {
                    OTT = {
                        NOT = {
                            has_country_flag = balkan_war_i_end
                            controls_state = 341
                            controls_state = 184
                            controls_state = 874
                            controls_state = 876
                            controls_state = 802
                            controls_state = 872
                            controls_state = 106
                            controls_state = 185
                            controls_state = 731
                            controls_state = 871
                            controls_state = 878
                            controls_state = 879
                            controls_state = 839
                            controls_state = 880
                            controls_state = 881
                            controls_state = 855
                            controls_state = 883
                        }
                        has_war_with = BUL
                        has_war_with = SER
                        has_war_with = MNT
                        has_war_with = GRE
                    }
                }
                BUL = {
                    transfer_state = 341
                    transfer_state = 871
                    transfer_state = 878
                    transfer_state = 839
                    transfer_state = 880
                    transfer_state = 881
                    transfer_state = 855
                    transfer_state = 883
                    transfer_state = 184
                    white_peace = OTT
                }
                SER = {
                    transfer_state = 106
                    transfer_state = 872
                    transfer_state = 802
                    transfer_state = 876
                    white_peace = OTT
                }
                MNT = {
                    transfer_state = 874
                    transfer_state = 875
                    white_peace = OTT
                }
                GRE = {
                    transfer_state = 185
                    transfer_state = 731
                    transfer_state = 879
                    white_peace = OTT
                }
                OTT = {
                    set_country_flag = balkan_war_i_end
                    182 = {
                        remove_claim_by = PREV
                    }
                    871 = {
                        remove_core_of = OTT
                    }
                    839 = {
                        remove_core_of = OTT
                    }
                    878 = {
                        remove_core_of = OTT
                    }
                    880 = {
                        remove_core_of = OTT
                    }
                    #so the ottomans dont hate the rest of the balkans as much 
                }
            }
        }
    }
    on_state_control_changed = { # Ottoman Victory - Balkan War I
        effect = {
            if = {
                limit = {
                    OTT = {
                        controls_state = 211
                        controls_state = 212
                        controls_state = 877
                        NOT = {
                            has_country_flag = balkan_war_i_end
                        }
                        has_war_with = BUL
                        has_war_with = SER
                        has_war_with = MNT
                        has_war_with = GRE
                    }
                }
                OTT = {
                    set_country_flag = balkan_war_i_end
                    transfer_state = 182
                    transfer_state = 211
                    transfer_state = 212
                    transfer_state = 877
                    if = {
	                    limit = {
		                    OR = {
		                    	has_dlc = "Together for Victory"
		                    	has_dlc = "Man the Guns"
		                    }
	                    }
	                    set_autonomy = {
		                    target = ALB
		                    autonomous_state = autonomy_integrated_puppet
	                    }
	                    set_autonomy = {
		                    target = MNT
		                    autonomous_state = autonomy_integrated_puppet
	                    }
	                    else = {
	            	        puppet = ALB
                            puppet = MNT
            	        }
                    }
                }
                SER = {
                    white_peace = OTT
                }
                MNT = {
                    white_peace = OTT
                }
                GRE = {
                    white_peace = OTT
                }
                BUL = {
                    white_peace = OTT
                }
            }
        }
    }
    on_state_control_changed = { # Balkan League Victory - Balkan War II
        effect = {
            if = {
                limit = {
                    BUL = {
                        NOT = {
                            has_country_flag = balkan_war_ii_end
                            controls_state = 341
                            controls_state = 855
                            controls_state = 878
                            controls_state = 871
                            has_war_with = SER
                            has_war_with = GRE
                        }
                    }
                }
                SER = {
                    transfer_state = 871
                }
                GRE = {
                    transfer_state = 184
                }
                if = {
                    limit = {
                        ROM = {
                            has_war_with = BUL
                        }
                    }
                    ROM = {
                        transfer_state = 77
                        white_peace = BUL
                    }
                }
                if = {
                    limit = {
                        OTT = {
                            has_war_with = BUL
                        }
                    }
                    OTT = {
                        transfer_state = 341
                        transfer_state = 855
                        white_peace = BUL
                    }
                }
                BUL = {
                    set_country_flag = balkan_war_ii_end
                }
                SER = {
                    white_peace = BUL
                }
                MNT = {
                    white_peace = BUL
                }
                GRE = {
                    white_peace = BUL
                }
            }
        }
    }
    on_state_control_changed = { # Bulgarian Victory - Balkan War II
        effect = {
            if = {
                limit = {
                    BUL = {
                        controls_state = 731
                        controls_state = 106
                        controls_state = 872
                        controls_state = 803
                        NOT = {
                            has_country_flag = balkan_war_ii_end
                        }
                        has_war_with = SER
                        has_war_with = MNT
                        has_war_with = GRE
                    }
                }
                BUL = {
                    set_country_flag = balkan_war_ii_end
                    transfer_state = 731
                    transfer_state = 106
                    transfer_state = 872
                    transfer_state = 803
                }
                SER = {
                    white_peace = BUL
                }
                MNT = {
                    white_peace = BUL
                }
                GRE = {
                    white_peace = BUL
                }
                OTT = {
                    white_peace = BUL
                }
                ROM = {
                    white_peace = BUL
                }
            }
        }
    }

    # MEXICO ON ACTIONS

    on_startup = {
        effect = {
            if = {
                limit = {
                    date < 1911.1.1
                }  
                MEX = {
			        country_event = {
    			        id = mexican_revolution.2
    			        days = 208
			        }
                }
            }
        }
    }

    #RUSSIAN ON ACTIONS
    on_weekly_RUS = {
        effect = {
            if = {
                limit = {
                    check_variable = { RUS_socialist_radicalisation > 79 }
                    check_variable = { party_popularity_100@communism > 59 }
                }
                if = {
                    limit = {
                        has_country_flag = RUS_provisional_government_in_charge
                    }
                    RUS_civil_war_start = yes
                }
                else = {
                    country_event = { id = rus_civilwar.1 }
                }
            }
        }
    }
    on_capitulation = {
        effect = {
            if = {
                limit = {
                    ROOT = {
                        original_tag = RUS
                    }
                    FROM = {
                        original_tag = SOV
                    }
                }
                clr_global_flag = Russian_civil_war_flag
                set_global_flag = Reds_won_civil_war_flag
            }
            if = {
                limit = {
                    ROOT = {
                        original_tag = SOV
                    }
                    FROM = {
                        original_tag = RUS
                    }
                }
                clr_global_flag = Russian_civil_war_flag
                set_global_flag = Whites_won_civil_war_flag
            }
        }
    }
}