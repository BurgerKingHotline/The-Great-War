#	Example:
#
#	example_effect = {
#		add_political_power = 66
#		add_popularity = {
#			ideology = fascism
#			popularity = 0.33
#		}
#	}
#
#
#	In a script file:
#
#	effect = {
#		example_effect = yes
#	}
#


#Senussiya resistence mechanic scripted effects, theres probably a better way to do this though

check_sides_civil_war = {
	hidden_effect = {
		every_owned_state = {
			limit = {
				OR = {
					has_state_flag = carranza_state_support
					has_state_flag = zapata_state_support
					has_state_flag = villa_state_support
					has_state_flag = diaz_state_support
				}
			}
			if = {
				limit = {
					has_state_flag = carranza_state_support
				}
				set_variable = {
					var = THIS.support_frame
					value = 3
				}
			}
			else_if = {
				limit = {
					has_state_flag = zapata_state_support
				}
				set_variable = {
					var = THIS.support_frame
					value = 4
				}
			}
			else_if = {
				limit = {
					has_state_flag = villa_state_support
				}
				set_variable = {
					var = THIS.support_frame
					value = 5
				}
			}
			else_if = {
				limit = {
					has_state_flag = diaz_state_support
				}
				set_variable = {
					var = THIS.support_frame
					value = 2
				}
			}
		}
		add_to_temp_array = { temparr = zapata_owned_states } # Simpler to do operations with an array later on.
add_to_temp_array = { temparr = villa_owned_states }
add_to_temp_array = { temparr = carranza_owned_states }
add_to_temp_array = { temparr = diaz_owned_states }
clear_array = potential_max

for_loop_effect = {
    start = 0
    end = 4
    value = temp
    if = {
        limit = {
            NOT = {
                count_triggers = {
                    amount = 2
                    check_variable = { temparr^temp < temparr^0 }
                    check_variable = { temparr^temp < temparr^1 }
                    check_variable = { temparr^temp < temparr^2 }
                    check_variable = { temparr^temp < temparr^3 }
                }
            }
        }
        add_to_array = { potential_max = temp }
        log = "[?temp] added to potential max"
    }
}
while_loop_effect = {
    limit = {
        check_variable = { potential_max^num > 2 }
    }
    set_temp_variable_to_random = { 
        var = index_to_remove
        max = potential_max^num
        integer = yes
    }
    if = {
        limit = {
            count_triggers = {
                amount = 2
                check_variable = { temparr^potential_max^index_to_remove = temparr^0 }
                check_variable = { temparr^potential_max^index_to_remove = temparr^1 }
                check_variable = { temparr^potential_max^index_to_remove = temparr^2 }
                check_variable = { temparr^potential_max^index_to_remove = temparr^3 }
            }
        }
        log = "[?potential_max^index_to_remove] removed from potential max"
        remove_from_array = {
            array = potential_max
            index = index_to_remove
        }
    }
}
		if = {
			limit = {
				check_variable = { potential_max^1 > potential_max^0 }
			}
			set_temp_variable = { mx = potential_max^1 }
			set_variable = { potential_max^1 = potential_max^0 }
			set_variable = { potential_max^0 = mx }
		}
	}
}

starting_civil_war_other_side_zapata = {
	if = {
    	limit = {
        	check_variable = { potential_max^0= 0 }
    	}
		set_temp_variable = { the_other_fuckers = potential_max^1 }
	}
	else = {
    	set_temp_variable = { the_other_fuckers = potential_max^0}
	}
	if = {
		limit = {
			check_variable = { the_other_fuckers = 1 }
		}
		start_civil_war = {
			ruling_party = communism
			ideology = democratic
			size = 0.5
			capital = 41
			states = all
				states_filter = {
					has_state_flag = villa_state_support  
				}
		}
	}
	else_if = {
		limit = {
			check_variable = { the_other_fuckers = 2 }
		}
		set_cosmetic_tag = mex_conventionists
		start_civil_war = {
			ruling_party = communism
			ideology = neutrality
			size = 0.5
			capital = 41
			set_cosmetic_tag = mex_constitutionalists
			states = all
				states_filter = {
					OR = {
						has_state_flag = carranza_state_support  
						has_state_flag = diaz_state_support  
					}
				}
		}
	}
	else_if = {
		limit = {
			check_variable = { the_other_fuckers = 3 }
		}
		set_cosmetic_tag = mex_conventionists
		start_civil_war = {
			ruling_party = communism
			ideology = neutrality
			size = 0.5
			capital = 41
			set_cosmetic_tag = mex_constitutionalists
			states = all
				states_filter = {
					OR = {
						has_state_flag = carranza_state_support  
						has_state_flag = diaz_state_support  
					}
				}
		}
	}
}

starting_civil_war_other_side_villa = {
	if = {
    	limit = {
        	check_variable = { potential_max^0= 1 }
    	}
		set_temp_variable = { the_other_fuckers = potential_max^1 }
	}
	else = {
    	set_temp_variable = { the_other_fuckers = potential_max^0}
	}
	if = {
		limit = {
			check_variable = { the_other_fuckers = 0 }
		}
		start_civil_war = {
			ruling_party = democratic
			ideology = communism
			size = 0.5
			capital = 41
			states = all
				states_filter = {
					has_state_flag = zapata_state_support  
				}
		}
	}
	else_if = {
		limit = {
			check_variable = { the_other_fuckers = 2 }
		}
		set_cosmetic_tag = mex_conventionists
		start_civil_war = {
			ruling_party = democratic
			ideology = neutrality
			size = 0.5
			capital = 41
			set_cosmetic_tag = mex_constitutionalists
			states = all
			states_filter = {
				OR = {
					has_state_flag = carranza_state_support  
					has_state_flag = diaz_state_support  
				}
			}
		}
	}
	else_if = {
		limit = {
			check_variable = { the_other_fuckers = 3 }
		}
		set_cosmetic_tag = mex_conventionists
		start_civil_war = {
			ruling_party = democratic
			ideology = neutrality
			size = 0.5
			capital = 41
			set_cosmetic_tag = mex_constitutionalists
			states = all
				states_filter = {
					OR = {
						has_state_flag = carranza_state_support  
						has_state_flag = diaz_state_support  
					}
				}
		}
	}
}

starting_civil_war_other_side_carranza = {
	if = {
    	limit = {
        	check_variable = { potential_max^0= 2 }
    	}
		set_temp_variable = { the_other_fuckers = potential_max^1 }
	}
	else = {
    	set_temp_variable = { the_other_fuckers = potential_max^0}
	}
	if = {
		limit = {
			check_variable = { the_other_fuckers = 0 }
		}
		start_civil_war = {
			ruling_party = neutrality
			ideology = communism
			size = 0.5
			capital = 41
			states = { 41 165 167 168 173 175 790 792 793 794 }
		}
	}
	else_if = {
		limit = {
			check_variable = { the_other_fuckers = 1 }
		}
		start_civil_war = {
			ruling_party = neutrality
			ideology = democratic
			size = 0.5
			capital = 41
			states = { 41 165 167 168 173 175 790 792 793 794 }
		}
	}
	else_if = {
		limit = {
			check_variable = { the_other_fuckers = 3 }
		}
		start_civil_war = {
			ruling_party = neutrality
			ideology = neutrality
			size = 0.5
			capital = 41
			states = { 41 165 167 168 173 175 790 792 793 794 }
		}
	}
}

starting_civil_war_other_side_diaz = {
	if = {
    	limit = {
        	check_variable = { potential_max^0= 3 }
    	}
		set_temp_variable = { the_other_fuckers = potential_max^1 }
	}
	else = {
    	set_temp_variable = { the_other_fuckers = potential_max^0}
	}
	if = {
		limit = {
			check_variable = { the_other_fuckers = 0 }
		}
		start_civil_war = {
			ruling_party = neutrality
			ideology = communism
			size = 0.5
			capital = 41
			states = { 41 165 167 168 173 175 790 792 793 794 }
		}
	}
	else_if = {
		limit = {
			check_variable = { the_other_fuckers = 1 }
		}
		start_civil_war = {
			ruling_party = neutrality
			ideology = democratic
			size = 0.5
			capital = 41
			states = { 41 165 167 168 173 175 790 792 793 794 }
		}
	}
	else_if = {
		limit = {
			check_variable = { the_other_fuckers = 2 }
		}
		start_civil_war = {
			ruling_party = neutrality
			ideology = neutrality
			size = 0.5
			capital = 41
			states = { 41 165 167 168 173 175 790 792 793 794 }
		}
	}
}


carranza_state_superiority = {
	if = {
		limit = {
			has_state_flag = zapata_state_support
		}
		clr_state_flag = zapata_state_support
		add_to_variable = {
			var = MEX.zapata_owned_states
			value = -1
		}
		set_state_flag = carranza_state_support
	}
	else_if = {
		limit = {
			has_state_flag = villa_state_support
		}
		clr_state_flag = villa_state_support
		add_to_variable = {
			var = MEX.villa_owned_states
			value = -1
		}
		set_state_flag = carranza_state_support
	}
	else_if = {
		limit = {
			has_state_flag = diaz_state_support
		}
		clr_state_flag = diaz_state_support
		add_to_variable = {
			var = MEX.diaz_owned_states
			value = -1
		}
		set_state_flag = carranza_state_support
	}
	else_if = {
		set_state_flag = carranza_state_support
	}
	add_to_variable = {
		var = MEX.carranza_owned_states
		value = 1
	}
}

zapata_state_superiority = {
	if = {
		limit = {
			has_state_flag = carranza_state_support
		}
		clr_state_flag = carranza_state_support
		add_to_variable = {
			var = MEX.carranza_owned_states
			value = -1
		}
		set_state_flag = zapata_state_support
	}
	else_if = {
		limit = {
			has_state_flag = villa_state_support
		}
		clr_state_flag = villa_state_support
		add_to_variable = {
			var = MEX.villa_owned_states
			value = -1
		}
		set_state_flag = zapata_state_support
	}
	else_if = {
		limit = {
			has_state_flag = diaz_state_support
		}
		clr_state_flag = diaz_state_support
		add_to_variable = {
			var = MEX.diaz_owned_states
			value = -1
		}
		set_state_flag = zapata_state_support
	}
	else_if = {
		set_state_flag = zapata_state_support
	}
	add_to_variable = {
		var = MEX.zapata_owned_states
		value = 1
	}
}

villa_state_superiority = {
	if = {
		limit = {
			has_state_flag = carranza_state_support
		}
		clr_state_flag = carranza_state_support
		add_to_variable = {
			var = MEX.carranza_owned_states
			value = -1
		}
		set_state_flag = villa_state_support
	}
	else_if = {
		limit = {
			has_state_flag = zapata_state_support
		}
		clr_state_flag = zapata_state_support
		add_to_variable = {
			var = MEX.zapata_owned_states
			value = -1
		}
		set_state_flag = villa_state_support
	}
	else_if = {
		limit = {
			has_state_flag = diaz_state_support
		}
		clr_state_flag = diaz_state_support
		add_to_variable = {
			var = MEX.diaz_owned_states
			value = -1
		}
		set_state_flag = villa_state_support
	}
	else_if = {
		set_state_flag = villa_state_support
	}
	add_to_variable = {
		var = MEX.villa_owned_states
		value = 1
	}
}

diaz_state_superiority = {
	if = {
		limit = {
			has_state_flag = carranza_state_support
		}
		clr_state_flag = carranza_state_support
		add_to_variable = {
			var = MEX.carranza_owned_states
			value = -1
		}
		set_state_flag = diaz_state_support
	}
	else_if = {
		limit = {
			has_state_flag = villa_state_support
		}
		clr_state_flag = villa_state_support
		add_to_variable = {
			var = MEX.villa_owned_states
			value = -1
		}
		set_state_flag = diaz_state_support
	}
	else_if = {
		limit = {
			has_state_flag = zapata_state_support
		}
		clr_state_flag = zapata_state_support
		add_to_variable = {
			var = MEX.zapata_owned_states
			value = -1
		}
		set_state_flag = diaz_state_support
	}
	else_if = {
		set_state_flag = diaz_state_support
	}
	add_to_variable = {
		var = MEX.diaz_owned_states
		value = 1
	}
}