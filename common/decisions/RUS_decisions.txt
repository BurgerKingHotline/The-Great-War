war_measures = {
	RUS_form_the_stavka = {
		icon = generic_civil_support

		allowed = {
			original_tag = RUS
		}

		visible = {
			NOT = {
				has_dynamic_modifier = {
					modifier = RUS_stavka
				}
			}
			has_completed_focus = RUS_formulate_the_stavka
		}

		cost = 25

		complete_effect = {
			add_dynamic_modifier = {
				modifier = RUS_stavka
			}
		}
		
		ai_will_do = {
			factor = 100
		}
	}
}
political_actions = {
	RUS_dismiss_the_duma_timer = {

		icon = generic_civil_support

		allowed = { always = no }

		available = {
			has_completed_focus = RUS_dismiss_the_duma
		}

		is_good = no
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = 210

		timeout_effect = {
			effect_tooltip = {
				add_political_power = -100
				add_stability = -0.15
				uncomplete_national_focus = {
					focus = RUS_cement_the_tsars_rule
					uncomplete_children = yes
					refund_political_power = no
				}
				add_timed_idea = {
					idea = RUS_political_deadlock_idea
					days = 180
				}
			}
			hidden_effect = {
				country_event = rus_events.39
			}
		}
	}

}

economy_decisions = {
	RUS_increase_industrialisation_attempts = {
		icon = generic_civil_support

		allowed = {
			original_tag = RUS
		}

		visible = {
			OR = {
				has_completed_focus = RUS_strengthen_worker_protections
				has_completed_focus = RUS_limit_worker_protections
			}
		}

		available = {
        }

		cost = 50

		complete_effect = {
			RUS_industrialisation_down = yes
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	RUS_decrease_industrialisation_attempts = {
		icon = generic_civil_support

		allowed = {
			original_tag = RUS
		}

		visible = {
			OR = {
				has_completed_focus = RUS_strengthen_worker_protections
				has_completed_focus = RUS_limit_worker_protections
			}
		}

		available = {
        }
		
		cost = 50

		complete_effect = {
			RUS_industrialisation_down = no
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}

RUS_operations = {
	

	RUS_military_offensive_ongoing = {

		icon = hol_draw_up_staff_plans

		fire_only_once = yes

		days_mission_timeout = 30

		is_good = no

		allowed = { always = no }

		cancel_trigger = {
			hidden_trigger = {
				has_war = no
			}
		}

		cancel_effect = {
			#log = "Mission cancelled"
			hidden_effect = {
				RUS_clean_military_offensive_effect = yes
			}
		}

		visible = {
			has_war = yes
			has_country_flag = RUS_military_offensive_in_progress_flag
		}

		available = { #Conditions to succeed in the offensive
			custom_trigger_tooltip = {
				tooltip = RUS_military_offensive_ongoing_trigger_tt
				all_of_scopes = {
					array = RUS_military_offensive_states
					is_controlled_by = ROOT
				}
			}
		}

		timeout_effect = { #FAIL
			#log = "Var = [?RUS_offensive_main_objective.GetName] // Array = [?RUS_military_offensive_states^0.GetName]" #Debug
			if = {
				limit = {
					#var:RUS.RUS_military_offensive_states^0 = {
					var:RUS_offensive_main_objective = {
						is_controlled_by = ROOT
					}
				}
				custom_effect_tooltip = RUS_military_offensive_ongoing_holding_main_objective_tt
			}
			else = {
				custom_effect_tooltip = RUS_military_offensive_ongoing_not_holding_main_objective_tt
				hidden_effect = {
					add_war_support = -0.1
					add_political_power = -75
				}
			}

			custom_effect_tooltip = RUS_military_offensive_ongoing_failing_main_objective_tt
			effect_tooltip = {
				add_war_support = -0.1
				add_political_power = -75
			}

			RUS_clean_military_offensive_effect = yes
		}

		complete_effect = { #SUCCESS
			RUS_clean_military_offensive_effect = yes

			add_war_support = 0.1
			add_political_power = 50
		}
	}

	RUS_military_offensive = {
		priority = 30

		icon = GFX_decision_generic_operation

		ai_will_do = {
			base = 0.5
		}

		state_target = yes

		target_trigger = {
			FROM = {
				RUS_is_military_offensive_main_objective = yes
			}
		}

		target_root_trigger = {
			has_war = yes
		}

		on_map_mode = map_and_decisions_view

		allowed = {
			original_tag = RUS
		}

		available = {
			NOT = { has_country_flag = RUS_military_offensive_in_progress_flag }
			command_power > 49
		}

		visible = {
			 FROM = {
			 	controller = {
			 		has_war_with = ROOT
			 	}
			 	any_neighbor_state = {
					OR = {
			 			is_controlled_by = ROOT
						any_neighbor_state = { #seperation of one state
			 				is_controlled_by = ROOT
						}
					}
			 	}
			 }
		}

		cancel_if_not_visible = yes

		cancel_effect = {
			#log = "Preparations cancelled"
			hidden_effect = {
				RUS_clean_military_offensive_effect = yes
			}
		}

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 14
		}
		custom_cost_text = decision_cost_CP_50_pp_15

		days_remove = 14

		modifier = {
			command_power_gain_mult = -0.5
		}

		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				add_political_power = -15
			}
			set_country_flag = RUS_military_offensive_in_progress_flag
		}

		remove_effect = {
			custom_effect_tooltip = RUS_military_offensive_scope_tt
			custom_effect_tooltip = SOV_military_offensive_current_scope_main_objective_tt
			effect_tooltip = {
				FROM = {
					custom_effect_tooltip = RUS_military_offensive_current_scope_negihbors_tt
					every_neighbor_state = { #NEIGHBOR STATES
						limit = {
							controller = { has_war_with = ROOT }
						}
					}
				}
			}

			hidden_effect = {
				set_variable = { RUS_offensive_main_objective = FROM } #This variable exists because trying to scope to the element 0 of an array causes an error :D (!)
				FROM = {
					ROOT = { add_to_array = { RUS_military_offensive_states = PREV } }
					every_neighbor_state = { #NEIGHBOR STATES
						limit = {
							controller = { has_war_with = ROOT }
						}
						ROOT = { add_to_array = { RUS_military_offensive_states = PREV } }
					}
				}
				RUS_set_military_offensive_effect = yes

				activate_mission = RUS_military_offensive_ongoing
			}
			custom_effect_tooltip = SOV_military_offensive_activate_decision_tt
		}
	}
}

russian_socialism_decisions = {
	RUS_tsarist_propaganda_dec = {
		icon = generic_civil_support

		available = {
        }
	
		modifier = {
			
		}
	
		days_remove = 100
		cost = 50

		modifier = {
			political_power_cost = 0.25
		}
		remove_effect = {
			add_stability = 0.1
			add_popularity = {
				ideology = neutrality
				popularity = 0.05
			}
			add_to_variable = {
				var = RUS_socialist_radicalisation
				value = -5
				tooltip = RUS_socialist_radicalisation_increase
			}
		}
		ai_will_do = {
			factor = 0
		}
	}

	RUS_raid_marxist_printing_houses = {
		icon = generic_civil_support

		available = {
        }
	
		modifier = {
			communism_drift = -0.03
		}
	
		days_remove = 100
		cost = 50

		complete_effect = {
			add_to_variable = {
				var = RUS_socialist_radicalisation
				value = 10
				tooltip = RUS_socialist_radicalisation_increase
			}
		}
		
		ai_will_do = {
			factor = 0
			modifier = {
				add = 1
				check_variable = { RUS_socialist_radicalisation < 70 }
			}
			modifier = {
				factor = 2
				check_variable = { RUS_socialist_radicalisation < 50 }
				check_variable = { party_popularity_100@communism > 30 }
			}
			modifier = {
				factor = 2
				check_variable = { RUS_socialist_radicalisation < 30 }
				check_variable = { party_popularity_100@communism > 40 }
			}
		}
	}

	RUS_give_trade_unions_liberty = {
		icon = generic_civil_support

		visible = {
			NOT = { has_completed_focus = RUS_destroy_trade_unions }
		}

		available = {
        }
		cost = 50
		days_re_enable = 100

		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
			add_to_variable = {
				var = RUS_socialist_radicalisation
				value = -5
				tooltip = RUS_socialist_radicalisation_increase
			}
			add_stability = 0.05
		}
		
		ai_will_do = {
			factor = 0
			modifier = {
				add = 1
				check_variable = { RUS_socialist_radicalisation > 40 }
			}
			modifier = {
				factor = 2
				check_variable = { RUS_socialist_radicalisation > 50 }
			}
			modifier = {
				factor = 2
				check_variable = { RUS_socialist_radicalisation > 60 }
			}
			modifier = {
				factor = 20000
				check_variable = { RUS_socialist_radicalisation > 70 }
			}
		}
	}
}
RUS_russification_decisions = {

	RUS_russify_finland = {
		icon = generic_civil_support

		available = {
			any_owned_state = {
				is_core_of = FIN
			}
			core_compliance = {
				occupied_country_tag = FIN
				value > 99
			}
			core_resistance = {
				occupied_country_tag = FIN
				value < 1
			}
		}
	
		modifier = {
			political_power_cost = 0.15
		}
		remove_effect = {
			every_state = {
				limit = {
					is_core_of = FIN
				}
				add_core_of = ROOT
			}
			add_to_variable = { russification_var = 1 }
			if = {
				limit = {
					check_variable = {
						var = russification_var
						value = 4
						compare = greater_than_or_equals
					}
				}
				swap_ideas = {
					remove_idea = RUS_russification
					add_idea = RUS_russification_1
				}
			}
		}

		fire_only_once = yes
		
		days_remove = 70
		cost = 50
		
		ai_will_do = {
			factor = 1000000
		}
	}

	RUS_russify_poland = {
		icon = generic_civil_support

		available = {
			any_owned_state = {
				is_core_of = POL
			}
			core_compliance = {
				occupied_country_tag = POL
				value > 99
			}
			core_resistance = {
				occupied_country_tag = POL
				value < 1
			}
		}
	
		modifier = {
			political_power_cost = 0.15
		}
		remove_effect = {
			every_state = {
				limit = {
					is_core_of = POL
				}
				add_core_of = ROOT
			}
			add_to_variable = { russification_var = 1 }
			if = {
				limit = {
					check_variable = {
						var = russification_var
						value = 4
						compare = greater_than_or_equals
					}
				}
				swap_ideas = {
					remove_idea = RUS_russification
					add_idea = RUS_russification_1
				}
			}
		}

		fire_only_once = yes
		
		days_remove = 70
		cost = 50
		
		ai_will_do = {
			factor = 1000000
		}
	}

	RUS_russify_baltic = {
		icon = generic_civil_support

		available = {
			any_owned_state = {
				OR = {
					is_core_of = LIT
					is_core_of = LAT
					is_core_of = EST
				}
			}
			if = {
				limit = {
					any_owned_state = {
						is_core_of = LIT
					}
				}
				core_compliance = {
					occupied_country_tag = LIT
					value > 99
				}
				core_resistance = {
					occupied_country_tag = LIT
					value < 1
				}
			}
			if = {
				limit = {
					any_owned_state = {
						is_core_of = LAT
					}
				}
				core_compliance = {
					occupied_country_tag = LAT
					value > 99
				}
				core_resistance = {
					occupied_country_tag = LAT
					value < 1
				}
			}
			if = {
				limit = {
					any_owned_state = {
						is_core_of = EST
					}
				}
				core_compliance = {
					occupied_country_tag = EST
					value > 99
				}
				core_resistance = {
					occupied_country_tag = EST
					value < 1
				}
			}
			
		}
	
		modifier = {
			political_power_cost = 0.15
		}
		remove_effect = {
			every_state = {
				limit = {
					OR = {
						is_core_of = LIT
						is_core_of = LAT
						is_core_of = EST
					}
				}
				add_core_of = ROOT
			}
			add_to_variable = { russification_var = 1 }
			if = {
				limit = {
					check_variable = {
						var = russification_var
						value = 4
						compare = greater_than_or_equals
					}
				}
				swap_ideas = {
					remove_idea = RUS_russification
					add_idea = RUS_russification_1
				}
			}
		}

		fire_only_once = yes
		
		days_remove = 70
		cost = 50
		
		ai_will_do = {
			factor = 1000000
		}
	}

	RUS_russify_central_asia = {
		icon = generic_civil_support

		available = {
			any_owned_state = {
				OR = {
					is_core_of = KAZ
					is_core_of = UZB
					is_core_of = KYR
					is_core_of = TAJ
					is_core_of = TMS
				}
			}
			if = {
				limit = {
					any_owned_state = {
						is_core_of = KAZ
					}
				}
				core_compliance = {
					occupied_country_tag = KAZ
					value > 99
				}
				core_resistance = {
					occupied_country_tag = KAZ
					value < 1
				}
			}
			if = {
				limit = {
					any_owned_state = {
						is_core_of = UZB
					}
				}
				core_compliance = {
					occupied_country_tag = UZB
					value > 99
				}
				core_resistance = {
					occupied_country_tag = UZB
					value < 1
				}
			}
			if = {
				limit = {
					any_owned_state = {
						is_core_of = KYR
					}
				}
				core_compliance = {
					occupied_country_tag = KYR
					value > 99
				}
				core_resistance = {
					occupied_country_tag = KYR
					value < 1
				}
			}
			if = {
				limit = {
					any_owned_state = {
						is_core_of = TAJ
					}
				}
				core_compliance = {
					occupied_country_tag = TAJ
					value > 99
				}
				core_resistance = {
					occupied_country_tag = TAJ
					value < 1
				}
			}
			if = {
				limit = {
					any_owned_state = {
						is_core_of = TMS
					}
				}
				core_compliance = {
					occupied_country_tag = TMS
					value > 99
				}
				core_resistance = {
					occupied_country_tag = TMS
					value < 1
				}
			}
		}
	
		modifier = {
			political_power_cost = 0.15
		}
		remove_effect = {
			every_state = {
				limit = {
					OR = {
						is_core_of = KAZ
						is_core_of = UZB
						is_core_of = KYR
						is_core_of = TAJ
						is_core_of = TMS
					}
				}
				add_core_of = ROOT
			}
			add_to_variable = { russification_var = 1 }
			if = {
				limit = {
					check_variable = {
						var = russification_var
						value = 4
						compare = greater_than_or_equals
					}
				}
				swap_ideas = {
					remove_idea = RUS_russification
					add_idea = RUS_russification_1
				}
			}
		}

		fire_only_once = yes
	
		days_remove = 70
		cost = 50
		
		ai_will_do = {
			factor = 1000000
		}
	}
}

RUS_tsarist_intervention_decisions = {
	RUS_intervene_in_the_economy = {
		icon = eng_trade_unions_demand

		available = {
			hidden_trigger = {
				NOT = {
					has_country_flag = RUS_tsar_intervening
				}
			}
        }

		complete_effect = {
			set_country_flag = RUS_tsar_intervening
		}

		remove_effect = {
			clr_country_flag = RUS_tsar_intervening

			set_variable = { RUS_intervention_cost = RUS_intervene_in_the_economy_cost }
			RUS_increase_intervention_campaign_cost_effect = yes
			set_variable = { RUS_intervene_in_the_economy_cost= RUS_intervention_cost }
			clear_variable = RUS_intervention_cost
		}
	
		modifier = {
			consumer_goods_factor = -0.05
			production_factory_efficiency_gain_factor = 0.05 
			production_factory_start_efficiency_factor = 0.08
			production_lack_of_resource_penalty_factor = 0.25 
			political_power_cost = 0.25
		}
	
		days_remove = 180
		cost = RUS_intervene_in_the_economy_cost
		
		ai_will_do = {
			factor = 5
		}
	}

	RUS_intervene_in_the_military = {
		icon = eng_trade_unions_demand

		visible = {
			has_completed_focus = RUS_take_full_control_of_the_army
		}

		available = {
			hidden_trigger = {
				NOT = {
					has_country_flag = RUS_tsar_intervening
				}
			}

        }
	
		modifier = {
			army_org_factor = 0.2
			army_core_defence_factor = 0.05
			army_core_attack_factor = 0.05
			army_morale_factor = -0.05
			max_planning_factor = -0.15
			planning_speed = -0.15
			political_power_cost = 0.25
		}

		complete_effect = {
			set_country_flag = RUS_tsar_intervening
		}

		remove_effect = {
			clr_country_flag = RUS_tsar_intervening

			set_variable = { RUS_intervention_cost = RUS_intervene_in_the_military_cost }
			RUS_increase_intervention_campaign_cost_effect = yes
			set_variable = { RUS_intervene_in_the_military_cost = RUS_intervention_cost }
			clear_variable = RUS_intervention_cost
		}
	
		days_remove = 180
		cost = RUS_intervene_in_the_military_cost
		
		ai_will_do = {
			factor = 0
			modifier = {
				add = 5
				has_war = yes
			}
			modifier = {
				factor = 2
				any_enemy_country = {
					is_major = yes
				}
			}
		}
	}

	RUS_intervene_in_national_security = {
		icon = eng_trade_unions_demand

		visible = {
		}

		available = {
			hidden_trigger = {
				NOT = {
					has_country_flag = RUS_tsar_intervening
				}
			}
        }

		allowed = {
			has_dlc = "La Resistance"
		}
	
		modifier = {
			crypto_strength = 3
			civilian_intel_to_others = -0.1
			army_intel_to_others = -0.1
			airforce_intel_to_others = -0.1
			foreign_subversive_activites = -0.3
			navy_intel_to_others = -0.1
			agency_upgrade_time = -0.25
			political_power_cost = 0.25
		}

		complete_effect = {
			set_country_flag = RUS_tsar_intervening
		}

		remove_effect = {
			clr_country_flag = RUS_tsar_intervening

			set_variable = { RUS_intervention_cost = RUS_intervene_in_national_security_cost }
			RUS_increase_intervention_campaign_cost_effect = yes
			set_variable = { RUS_intervene_in_national_security_cost = RUS_intervention_cost }
			clear_variable = RUS_intervention_cost
		}
	
		days_remove = 180
		cost = RUS_intervene_in_national_security_cost
		
		ai_will_do = {
			factor = 4
			modifier = {
				factor = 2
				OR = {
					has_stability < 0.4
					has_war_support < 0.4
				}
			}
		}
	}

	RUS_intervene_in_foreign_policy = {
		icon = eng_trade_unions_demand

		visible = {
		}

		available = {
			hidden_trigger = {
				NOT = {
					has_country_flag = RUS_tsar_intervening
				}
			}
        }
	
		modifier = {
			opinion_gain_monthly_factor = 0.3
			custom_modifier_tooltip = RUS_other_people_like_you_more
			improve_relations_maintain_cost_factor = 0.15
		}

		

		complete_effect = {
			set_country_flag = RUS_tsar_intervening
			hidden_effect = {
				every_other_country = {
					add_ai_strategy = {
						type = befriend 
						id = RUS
						value = 20
					}
				}
			}
		}

		remove_effect = {
			clr_country_flag = RUS_tsar_intervening

			set_variable = { RUS_intervention_cost = RUS_intervene_in_foreign_policy_cost }
			RUS_increase_intervention_campaign_cost_effect = yes
			set_variable = { RUS_intervene_in_foreign_policy_cost = RUS_intervention_cost }
			clear_variable = RUS_intervention_cost

			hidden_effect = {
				every_other_country = {
					add_ai_strategy = {
						type = befriend 
						id = RUS
						value = -20
					}
				}
			}
		}
	
		days_remove = 180
		cost = RUS_intervene_in_foreign_policy_cost
		
		ai_will_do = {
			factor = 4
			modifier = {
				factor = 2
				OR = {
					has_stability < 0.4
					has_war_support < 0.4
				}
			}
		}
	}
	
	RUS_intervene_in_political_affairs = {
		icon = eng_trade_unions_demand

		visible = {
		}

		available = {
			hidden_trigger = {
				NOT = {
					has_country_flag = RUS_tsar_intervening
				}
			}
        }
	
		modifier = {
			political_advisor_cost_factor = -0.15
			trade_laws_cost_factor = -0.15
			economy_cost_factor = -0.15
			political_power_cost = 0.25
		}

		complete_effect = {
			set_country_flag = RUS_tsar_intervening
			hidden_effect = {
				every_other_country = {
					add_ai_strategy = {
						type = befriend 
						id = RUS
						value = 20
					}
				}
			}
		}

		remove_effect = {
			clr_country_flag = RUS_tsar_intervening

			set_variable = { RUS_intervention_cost = RUS_intervene_in_political_affairs_cost }
			RUS_increase_intervention_campaign_cost_effect = yes
			set_variable = { RUS_intervene_in_political_affairs_cost = RUS_intervention_cost }
			clear_variable = RUS_intervention_cost

			hidden_effect = {
				every_other_country = {
					add_ai_strategy = {
						type = befriend 
						id = RUS
						value = -20
					}
				}
			}
		}
	
		days_remove = 180
		cost = RUS_intervene_in_political_affairs_cost
		
		ai_will_do = {
			factor = 4
			modifier = {
				factor = 2
				OR = {
					has_stability < 0.4
					has_war_support < 0.4
				}
			}
		}
	}

	RUS_intervene_in_mobilization = {
		icon = eng_trade_unions_demand

		visible = {
		}

		available = {
			hidden_trigger = {
				NOT = {
					has_country_flag = RUS_tsar_intervening
				}
			}
        }
	
		modifier = {
			mobilization_laws_cost_factor = -0.15
			weekly_manpower = 300
			mobilization_speed = 0.3
		}

		complete_effect = {
			set_country_flag = RUS_tsar_intervening
			hidden_effect = {
				every_other_country = {
					add_ai_strategy = {
						type = befriend 
						id = RUS
						value = 20
					}
				}
			}
		}

		remove_effect = {
			clr_country_flag = RUS_tsar_intervening

			set_variable = { RUS_intervention_cost = RUS_intervene_in_mobilization_cost }
			RUS_increase_intervention_campaign_cost_effect = yes
			set_variable = { RUS_intervene_in_mobilization_cost = RUS_intervention_cost }
			clear_variable = RUS_intervention_cost

			hidden_effect = {
				every_other_country = {
					add_ai_strategy = {
						type = befriend 
						id = RUS
						value = -20
					}
				}
			}
		}
	
		days_remove = 180
		cost = RUS_intervene_in_mobilization_cost
		
		ai_will_do = {
			factor = 4
			modifier = {
				factor = 2
				OR = {
					has_stability < 0.4
					has_war_support < 0.4
				}
			}
		}
	}
}

economy_decisions = {
	RUS_finish_the_trans_siberian_railway_dec = {

		icon = generic_form_nation

		allowed = { always = no }

		available = {
			has_railway_connection = {
				start_state = 566
				target_state = 657
			}
		}

		is_good = yes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = 180

		timeout_effect = {
        	add_political_power = -100
			add_stability = -0.05
		}

        complete_effect = {
			add_political_power = 50
			add_stability = 0.05
        }
	}

	RUS_ai_build_siberian_railway = {
		icon = generic_civil_support

		visible = {
			OR = { #wouldve liked to use allowed, but since theres a debug console command...
				is_ai = yes
				is_debug = yes
			}
		}

		allowed = { always = no }

		is_good = yes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = 100

		timeout_effect = {
			build_railway = {
				level = 1
				build_only_on_allied = yes
				controller_priority = {
					base = 1
					modifier = {
						tag = RUS
						add = 2
					}
				}
				fallback = yes
				path = { 4725 7763 12657 10678 7851 12543 10559 7725 4677 }
				start_province = 4725
				target_province = 4677
			}
			build_railway = {
				level = 1
				build_only_on_allied = yes
				controller_priority = {
					base = 1
					modifier = {
						tag = RUS
						add = 2
					}
				}
				fallback = yes
				path = { 4797 1762 4837 10528 4766 12507 7860 10683 7786 4677 }
				start_province = 4797
				target_province = 4677
			}
			563 = {
				add_building_construction = {
					type = supply_node
					level = 1
					instant_build = yes
					province = 4677
				}
			}
		}
	}
}

#SOVIET DECISIONS

SOV_form_ssrs = {
	SOV_form_transcaucasia_ssr = {
		icon = generic_civil_support

		visible = {
			OR = {
				controls_state = 826
				controls_state = 231
				controls_state = 230
				controls_state = 229
			}
		}

		available = {
			controls_state = 826
			controls_state = 231
			controls_state = 230
			controls_state = 229
			OR = {
				any_enemy_country = {
					has_cosmetic_tag = transcaucasia_unified
					exists = yes
					has_capitulated = yes
				}
				any_country = {
					NOT = {
						has_cosmetic_tag = transcaucasia_unified
					}
				}
			}
        }
		cost = 50

		complete_effect = {
			if = {
				limit = {
					any_country = {
						has_cosmetic_tag = transcaucasia_unified
						exists = yes
					}
				}
				random_country = {
					limit = {
						has_cosmetic_tag = transcaucasia_unified
						has_war_with = ROOT
					}
					ROOT = {
						white_peace = PREV
						set_autonomy = {
							target = PREV
							autonomous_state = autonomy_soviet_republic
						}
					}
					every_state = {
						limit = {
							OWNER = {
								tag = ROOT
								is_subject_of = ROOT
							}
							OR = {
								state = 230
								state = 229
								state = 971
								state = 842
								state = 970
								state = 231
								state = 826
								state = 828
								state = 354
								state = 800
								state = 819
								state = 832
							}
						}
						transfer_state_to = THIS
						add_core_of = THIS
					}
				}
				
			}
			else = {
				create_dynamic_country = {
					original_tag = AZR
					save_global_event_target_as = transcaucasia_event_target
					set_state_owner = 229 
					add_state_core = 229
					
					every_state = {
						limit = {
							OWNER = {
								tag = ROOT
								is_subject_of = ROOT
							}
							OR = {
								state = 230
								state = 229
								state = 971
								state = 842
								state = 970
								state = 231
								state = 826
								state = 828
								state = 354
								state = 800
								state = 819
								state = 832
							}
						}
						transfer_state_to = THIS
						add_core_of = THIS
					}

					set_cosmetic_tag = transcaucasia_unified
					ROOT = {
						set_autonomy = {
							target = PREV
							autonomous_state = autonomy_soviet_republic
						}
					}
				}
			}
		}
		
		ai_will_do = {
			factor = 1000
		}
	}

	SOV_form_fer_ssr = {
		icon = generic_civil_support

		visible = {
			OR = {
				controls_state = 564
				controls_state = 563
				controls_state = 561
			}
		}

		available = {
			controls_state = 564
			controls_state = 563
			controls_state = 561
			OR = {
				any_enemy_country = {
					tag = FER
					exists = yes
					has_capitulated = yes
				}
				FER = {
					exists = no
				}
			}
        }
		cost = 50

		complete_effect = {
			if = {
				limit = {
					FER = {
						exists = yes
					}
				}
				FER = {
					ROOT = {
						white_peace = PREV
						set_autonomy = {
							target = PREV
							autonomous_state = autonomy_soviet_republic
						}
					}
				}
			}
			else = {
				FER = {
					set_state_owner = 564
					add_state_core = 564
					if = {
						limit = {
							ROOT = {
								controls_state = 564
							}
						}
						set_state_controller = 564
					}

					add_state_core = 563
					if = {
						limit = {
							ROOT = {
								owns_state = 563
							}
						}
						set_state_owner = 563
					}
					if = {
						limit = {
							ROOT = {
								controls_state = 563
							}
						}
						set_state_controller = 563
					}

					add_state_core = 561
					if = {
						limit = {
							ROOT = {
								owns_state = 561
							}
						}
						set_state_owner = 561
					}
					if = {
						limit = {
							ROOT = {
								controls_state = 561
							}
						}
						set_state_controller = 561
					}
					ROOT = {
						set_autonomy = {
							target = PREV
							autonomous_state = autonomy_soviet_republic
						}
					}
				}
			}
		}
		
		ai_will_do = {
			factor = 1000
		}
	}

	SOV_give_vladivostok_ssr = {
		icon = generic_civil_support

		visible = {
			OR = {
				controls_state = 560
				controls_state = 657
				controls_state = 409
				controls_state = 408
			}
			FER = {
				exists = yes
				is_subject_of = ROOT
			}
		}

		available = {
			controls_state = 560
			controls_state = 657
			controls_state = 409
			controls_state = 408
        }
		cost = 50

		complete_effect = {
			FER = {
				add_state_core = 657
				if = {
					limit = {
						ROOT = {
							owns_state = 657
						}
					}
					set_state_owner = 657
				}
				if = {
					limit = {
						ROOT = {
							controls_state = 657
						}
					}
					set_state_controller = 657
				}

				add_state_core = 560
				if = {
					limit = {
						ROOT = {
							owns_state = 560
						}
					}
					set_state_owner = 560
				}
				if = {
					limit = {
						ROOT = {
							controls_state = 560
						}
					}
					set_state_controller = 560
				}

				add_state_core = 409
				if = {
					limit = {
						ROOT = {
							owns_state = 409
						}
					}
					set_state_owner = 409
				}
				if = {
					limit = {
						ROOT = {
							controls_state = 409
						}
					}
					set_state_controller = 409
				}

				add_state_core = 408
				if = {
					limit = {
						ROOT = {
							owns_state = 408
						}
					}
					set_state_owner = 408
				}
				if = {
					limit = {
						ROOT = {
							controls_state = 408
						}
					}
					set_state_controller = 408
				}
				ROOT = {
					set_autonomy = {
						target = PREV
						autonomous_state = autonomy_soviet_republic
					}
				}
			}
		}
		
		ai_will_do = {
			factor = 1000
		}
	}
}

SOV_peoples_militias = {
	SOV_spawn_militias = {
		icon = generic_civil_support

		visible = {
			has_global_flag = Russian_civil_war_flag
			FROM = {
				NOT = {
					has_state_flag = RUS_state_militia_spawned
				}
			}
		}

		target_trigger = {
			FROM = {
				is_core_of = ROOT
			}
		}

		state_target = yes

		available = {
			
        }

		custom_cost_trigger = {
			command_power > 24
		}
		custom_cost_text = decision_cost_CP_25

		complete_effect = {
			hidden_effect = {
				set_variable = {
					var = FROM.RUS_divisions_spawned_amount
					value = 0
				}
				FROM = {
					create_unit = {
						division = "name = \"People's Militia\" division_template = \"People's Militia\" start_experience_factor = 0.5 start_equipment_factor = 0.8 start_manpower_factor = 1"
						owner = SOV
					} 
					FROM = {
						add_to_variable = { RUS_divisions_spawned_amount = 1 } 
					}
					if = {
						limit = {
							any_neighbor_state = {
								controller = {
									has_war_with = SOV
								}
							}
						}
						create_unit = {
							division = "name = \"People's Militia\" division_template = \"People's Militia\" start_experience_factor = 0.5 start_equipment_factor = 0.8 start_manpower_factor = 1"
							owner = SOV
						} 
						add_to_variable = { RUS_divisions_spawned_amount = 1 } 
					}
					if = {
						limit = {
							state_strategic_value > 15
						}
						create_unit = {
							division = "name = \"People's Militia\" division_template = \"People's Militia\" start_experience_factor = 0.5 start_equipment_factor = 0.8 start_manpower_factor = 1"
							owner = SOV
						} 
						add_to_variable = { RUS_divisions_spawned_amount = 1 } 
					}
					if = {
						limit = {
							state_strategic_value > 25
						}
						create_unit = {
							division = "name = \"People's Militia\" division_template = \"People's Militia\" start_experience_factor = 0.5 start_equipment_factor = 0.8 start_manpower_factor = 1"
							owner = SOV
						} 
						add_to_variable = { RUS_divisions_spawned_amount = 1 } 
					}
					if = {
						limit = {
							OR = {
								state = 219
								state = 195
							}
						}
						create_unit = {
							division = "name = \"People's Militia\" division_template = \"People's Militia\" start_experience_factor = 0.5 start_equipment_factor = 0.8 start_manpower_factor = 1"
							owner = SOV
						}
						create_unit = {
							division = "name = \"People's Militia\" division_template = \"People's Militia\" start_experience_factor = 0.5 start_equipment_factor = 0.8 start_manpower_factor = 1"
							owner = SOV
						} 
						create_unit = {
							division = "name = \"People's Militia\" division_template = \"People's Militia\" start_experience_factor = 0.5 start_equipment_factor = 0.8 start_manpower_factor = 1"
							owner = SOV
						} 
						create_unit = {
							division = "name = \"People's Militia\" division_template = \"People's Militia\" start_experience_factor = 0.5 start_equipment_factor = 0.8 start_manpower_factor = 1"
							owner = SOV
						} 
						add_to_variable = { RUS_divisions_spawned_amount = 4 }
					}
					random_list = {
						1 = {

						}
						2 = {
							create_unit = {
								division = "name = \"People's Militia\" division_template = \"People's Militia\" start_experience_factor = 0.5 start_equipment_factor = 0.8 start_manpower_factor = 1"
								owner = SOV
							} 
							FROM = {
								add_to_variable = { RUS_divisions_spawned_amount = 1 } 
							}
						}
						1 = {
							create_unit = {
								division = "name = \"People's Militia\" division_template = \"People's Militia\" start_experience_factor = 0.5 start_equipment_factor = 0.8 start_manpower_factor = 1"
								owner = SOV
							} 
							create_unit = {
								division = "name = \"People's Militia\" division_template = \"People's Militia\" start_experience_factor = 0.5 start_equipment_factor = 0.8 start_manpower_factor = 1"
								owner = SOV
							} 
							add_to_variable = { RUS_divisions_spawned_amount = 2 } 
							modifier = {
								factor = 0
								state_strategic_value < 5
							}
						}
					}
					set_state_flag = RUS_state_militia_spawned
				}
			}
			custom_effect_tooltip = RUS_amount_of_militia_spawned_tt
		}

		fixed_random_seed = no
		
		ai_will_do = {
			factor = 1000
		}
	}
}

SOV_civil_war = {
	
	SOV_consolidate_our_lands_timer = {

		icon = generic_civil_support

		allowed = { always = no }

		available = {
			#has_completed_focus = RUS_dismiss_the_duma
		}

		is_good = no
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = 100

		timeout_effect = {
			every_other_country = {
				limit = {
					has_war_with = RUS
				}
				declare_war_on = {
					target = SOV
					type = annex_everything
				}
			}
		}
	}
}